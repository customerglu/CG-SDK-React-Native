{"version":3,"file":"commonjs.js","names":["build","root","source","output","options","report","info","kleur","blue","path","relative","del","compile","modules","babelrc","configFile","copyFlow"],"sources":["../../src/targets/commonjs.ts"],"sourcesContent":["import path from 'path';\nimport kleur from 'kleur';\nimport del from 'del';\nimport compile from '../utils/compile';\nimport type { Input } from '../types';\n\ntype Options = Input & {\n  options?: {\n    babelrc?: boolean | null;\n    configFile?: string | false | null;\n    copyFlow?: boolean;\n  };\n};\n\nexport default async function build({\n  root,\n  source,\n  output,\n  options,\n  report,\n}: Options) {\n  report.info(\n    `Cleaning up previous build at ${kleur.blue(path.relative(root, output))}`\n  );\n\n  await del([output]);\n\n  await compile({\n    root,\n    source,\n    output,\n    modules: 'commonjs',\n    babelrc: options?.babelrc,\n    configFile: options?.configFile,\n    copyFlow: options?.copyFlow,\n    report,\n  });\n}\n"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AACA;;;;AAWe,eAAeA,KAAf,CAAqB;EAClCC,IADkC;EAElCC,MAFkC;EAGlCC,MAHkC;EAIlCC,OAJkC;EAKlCC;AALkC,CAArB,EAMH;EACVA,MAAM,CAACC,IAAP,CACG,iCAAgCC,cAAA,CAAMC,IAAN,CAAWC,aAAA,CAAKC,QAAL,CAAcT,IAAd,EAAoBE,MAApB,CAAX,CAAwC,EAD3E;EAIA,MAAM,IAAAQ,YAAA,EAAI,CAACR,MAAD,CAAJ,CAAN;EAEA,MAAM,IAAAS,gBAAA,EAAQ;IACZX,IADY;IAEZC,MAFY;IAGZC,MAHY;IAIZU,OAAO,EAAE,UAJG;IAKZC,OAAO,EAAEV,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEU,OALN;IAMZC,UAAU,EAAEX,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEW,UANT;IAOZC,QAAQ,EAAEZ,OAAF,aAAEA,OAAF,uBAAEA,OAAO,CAAEY,QAPP;IAQZX;EARY,CAAR,CAAN;AAUD"}